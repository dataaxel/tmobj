<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>tmobj – Objektigenkänning</title>

  <!-- Version 03 - Graph-objekt 18.38-->
  <!-- TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js"></script>

  <style>
    :root { --pad: 14px; --radius: 16px; }
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; background:#0b0f17; color:#fff; }
    .wrap { height: 100svh; display: grid; grid-template-rows: 1fr auto; }
    .stage { position: relative; overflow: hidden; background:#000; border-bottom-left-radius:24px; border-bottom-right-radius:24px; }
    video, canvas { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

    .hud { position:absolute; left:var(--pad); right:var(--pad); top:var(--pad); display:grid; gap:10px; pointer-events:none; }
    .card {
      backdrop-filter: blur(10px);
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius);
      padding: 12px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .title { font-size: 14px; opacity: 0.9; margin-bottom: 4px; }
    .big { font-size: 22px; font-weight: 750; line-height: 1.2; }
    .row { display:flex; justify-content: space-between; gap: 10px; margin-top: 8px; font-size: 13px; opacity: 0.92; }
    .bar { height:10px; border-radius:999px; background: rgba(255,255,255,0.12); overflow:hidden; margin-top:10px; }
    .bar > div { height:100%; width:0%; background: linear-gradient(90deg,#37d67a,#00c2ff); border-radius:999px; transition: width 120ms linear; }
    .mono { font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }

    .bottom { padding: var(--pad); display:grid; gap:10px; background:#0b0f17; }
    .btns { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    button { border:0; border-radius: 16px; padding: 14px 16px; font-size: 16px; font-weight: 650; background:#1b2436; color:#fff; }
    button.primary { background:#2563eb; }
    button:disabled { opacity:0.5; }

    .status { font-size: 13px; opacity: 0.8; display:flex; justify-content: space-between; gap:10px; flex-wrap: wrap; }
    .hint { font-size: 12px; opacity: 0.65; line-height: 1.35; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="stage">
      <video id="video" playsinline muted></video>
      <canvas id="overlay"></canvas>

      <div class="hud">
        <div class="card">
          <div class="title">Top prediction</div>
          <div class="big" id="topLabel">—</div>
          <div class="row">
            <div>Confidence</div>
            <div class="mono" id="topConf">—</div>
          </div>
          <div class="bar"><div id="confBar"></div></div>
          <div class="row" id="top3" style="margin-top:10px; opacity:0.85;">
            <div class="mono">—</div><div class="mono">—</div><div class="mono">—</div>
          </div>
        </div>

        <div class="card">
          <div class="row"><div>Status</div><div class="mono" id="status">Init…</div></div>
          <div class="row"><div>FPS</div><div class="mono" id="fps">—</div></div>
        </div>
      </div>
    </div>

    <div class="bottom">
      <div class="btns">
        <button class="primary" id="startBtn">Starta kamera</button>
        <button id="stopBtn" disabled>Stoppa</button>
      </div>

      <div class="status">
        <div>Model: <span class="mono" id="modelState">loading…</span></div>
        <div>Input: <span class="mono" id="inputInfo">224×224×3</span></div>
        <div>Mode: <span class="mono">GraphModel</span></div>
      </div>

      <div class="hint">
        Tips: iPhone kräver HTTPS (GitHub Pages funkar). Om kamer
